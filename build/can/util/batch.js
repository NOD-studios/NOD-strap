define(["can/util/can"],function(t){var i=1,n=0,c=[],a=[];t.batch={start:function(t){n++,t&&a.push(t)},stop:function(e,f){if(e?n=0:n--,0===n){var r,h,s=c.slice(0),l=a.slice(0);for(c=[],a=[],i++,f&&t.batch.start(),r=0,h=s.length;h>r;r++)t.dispatch.apply(s[r][0],s[r][1]);for(r=0,h=l.length;r<l.length;r++)l[r]()}},trigger:function(a,e,f){if(!a._init){if(0===n)return t.dispatch.call(a,e,f);e="string"==typeof e?{type:e}:e,e.batchNum=i,c.push([a,[e,f]])}}}});
//# sourceMappingURL=batch.js.map