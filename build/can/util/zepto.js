define(["can/util/can","can/util/attr","can/event","zepto","can/util/object/isplain","can/util/fragment","can/util/deferred","can/util/array/each","can/util/inserted"],function(t,n,e){function a(t,n){var e=t[o],a=e&&s[e];return void 0===n?a||i(t):a&&a[n]||u.call(r(t),n)}function i(t,n,e){var a=t[o]||(t[o]=++c),i=s[a]||(s[a]={});return void 0!==n&&(i[n]=e),i}var r=Zepto,s={},u=r.fn.data,c=r.uuid=+new Date,o=r.expando="Zepto"+c;r.fn.data=function(t,n){return void 0===n?0===this.length?void 0:a(this[0],t):this.each(function(e){i(this,t,r.isFunction(n)?n.call(this,e,a(this,t)):n)})},r.cleanData=function(n){for(var e,a=0;void 0!==(e=n[a]);a++)t.trigger(e,"removed",[],!1);for(a=0;void 0!==(e=n[a]);a++){var i=e[o];delete s[i]}};var d=t.each;r.extend(t,Zepto),t.each=d,t.attr=n,t.event=e;var l=function(t,n){return t[0]&&t[0][n]||t[n]};t.trigger=function(n,e,a,i){n.trigger?n.trigger(e,a):l(n,"dispatchEvent")?i===!1?r([n]).triggerHandler(e,a):r([n]).trigger(e,a):("string"==typeof e&&(e={type:e}),e.target=e.target||n,t.dispatch.call(n,e,t.makeArray(a)))},t.$=Zepto,t.bind=function(n,e){return this.bind&&this.bind!==t.bind?this.bind(n,e):l(this,"addEventListener")?r([this]).bind(n,e):t.addEvent.call(this,n,e),this},t.unbind=function(n,e){return this.unbind&&this.unbind!==t.unbind?this.unbind(n,e):l(this,"addEventListener")?r([this]).unbind(n,e):t.removeEvent.call(this,n,e),this},t.on=t.bind,t.off=t.unbind,t.delegate=function(n,e,a){n?this.delegate?this.delegate(n,e,a):l(this,"addEventListener")?r([this]).delegate(n,e,a):t.addEvent.call(this,e,a):t.bind.call(this,e,a)},t.undelegate=function(n,e,a){n?this.undelegate?this.undelegate(n,e,a):l(this,"addEventListener")?r([this]).undelegate(n,e,a):t.removeEvent.call(this,e,a):t.unbind.call(this,e,a)},r.each(["append","filter","addClass","remove","data","has"],function(n,e){t[e]=function(n){return n[e].apply(n,t.makeArray(arguments).slice(1))}}),t.makeArray=function(n){var e=[];return null==n?[]:void 0===n.length||"string"==typeof n?[n]:(t.each(n,function(t,n){e[n]=t}),e)},t.proxy=function(t,n){return function(){return t.apply(n,arguments)}};var f=r.ajaxSettings.xhr;r.ajaxSettings.xhr=function(){var t=f(),n=t.open;return t.open=function(t,e){n.call(this,t,e,void 0===h?!0:h)},t};var h,v=r.ajax,g=function(t,n){for(var e in t)n[e]="function"==typeof n[e]?function(){t[e].apply(t,arguments)}:e[t]};t.ajax=function(n){var e=n.success,a=n.error,i=t.Deferred();n.success=function(t){g(r,i),i.resolve.call(i,t),e&&e.apply(this,arguments)},n.error=function(){g(r,i),i.reject.apply(i,arguments),a&&a.apply(this,arguments)},n.async===!1&&(h=!1);var r=v(n);return h=void 0,g(r,i),i};var p=r.fn.empty;r.fn.empty=function(){return this.each(function(){r.cleanData(this.getElementsByTagName("*")),this.innerHTML=""}),p.call(this)};var m=r.fn.remove;r.fn.remove=function(){return this.each(function(){this.getElementsByTagName&&r.cleanData([this].concat(t.makeArray(this.getElementsByTagName("*"))))}),m.call(this)},t.trim=function(t){return t.trim()},t.isEmptyObject=function(t){var n;for(n in t);return void 0===n},t.extend=function(n){if(n===!0){var e=t.makeArray(arguments);return e.shift(),r.extend.apply(r,e)}return r.extend.apply(r,arguments)},t.get=function(t,n){return t[n]},t.each(["after","prepend","before","append","html"],function(n){var e=Zepto.fn[n];Zepto.fn[n]=function(){var n,a=t.makeArray(arguments);null!=a[0]&&("string"==typeof a[0]&&(a[0]=r.zepto.fragment(a[0])),n=11===a[0].nodeType?t.makeArray(a[0].childNodes):[a[0]]);var i=e.apply(this,a);return t.inserted(n),i}}),delete n.MutationObserver;var y=r.fn.attr;r.fn.attr=function(n,e){var a,i,r="string"==typeof n;void 0!==e&&r&&(a=y.call(this,n));var s=y.apply(this,arguments);return void 0!==e&&r&&(i=y.call(this,n)),i!==a&&t.attr.trigger(this[0],n,a),s};var b=r.fn.removeAttr;r.fn.removeAttr=function(n){var e=y.call(this,n),a=b.apply(this,arguments);return null!=e&&t.attr.trigger(this[0],n,e),a};var A=r.fn.bind,E=r.fn.unbind;return r.fn.bind=function(n){return"attributes"===n&&this.each(function(){var n=t.$(this);t.data(n,"canHasAttributesBindings",(t.data(n,"canHasAttributesBindings")||0)+1)}),A.apply(this,arguments)},r.fn.unbind=function(n){return"attributes"===n&&this.each(function(){var n=t.$(this),e=t.data(n,"canHasAttributesBindings")||0;0>=e?t.data(n,"canHasAttributesBindings",0):t.data(n,"canHasAttributesBindings",e-1)}),E.apply(this,arguments)},t});
//# sourceMappingURL=zepto.js.map