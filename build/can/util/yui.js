define(["can/util/can","can/util/attr","yui","can/event","can/util/fragment","can/util/array/each","can/util/object/isplain","can/util/deferred","can/util/hashchange","can/util/inserted"],function(can,attr){YUI.add("can-modifications",function(e){var n=e.DOM.addHTML;e.DOM.addHTML=function(e,t,a){("string"==typeof t||"number"==typeof t)&&(t=can.buildFragment(t));var i;i=11===t.nodeType?can.makeArray(t.childNodes):[t];var r=n.call(this,e,t,a);return can.inserted(i),r};var t=e.Node.prototype.on;e.Node.prototype.on=function(e){if("attributes"===e){var n=can.$(this);can.data(n,"canHasAttributesBindings",(can.data(n,"canHasAttributesBindings")||0)+1);var a=t.apply(this,arguments),i=a.detach;return a.detach=function(){var e=can.data(n,"canHasAttributesBindings")||0;return 0>=e?can.cleanData(n,"canHasAttributesBindings"):can.data(n,"canHasAttributesBindings",e-1),i.apply(this,arguments)},a}return t.apply(this,arguments)}},"3.7.3",{requires:["node-base"]});var Y=can.Y=can.Y||YUI().use("*");can.trim=function(e){return Y.Lang.trim(e)},can.makeArray=function(e){return e?Y.Array(e):[]},can.isArray=Y.Lang.isArray,can.inArray=function(e,n,t){return n?Y.Array.indexOf(n,e,t):-1},can.map=function(e,n){return Y.Array.map(can.makeArray(e||[]),n)},can.extend=function(e){for(var n,t=e===!0?1:0,a=arguments[t],i=t+1;n=arguments[i];i++)Y.mix(a,n,!0,null,null,!!t);return a},can.param=function(e){return Y.QueryString.stringify(e,{arrayKey:!0})},can.isEmptyObject=function(e){return Y.Object.isEmpty(e)},can.proxy=function(){return Y.bind.apply(Y,arguments)},can.isFunction=function(e){return Y.Lang.isFunction(e)};var prepareNodeList=function(e){return e.each(function(n,t){e[t]=n.getDOMNode()}),e.length=e.size(),e};can.$=function(e){return e===window?window:e instanceof Y.NodeList?prepareNodeList(e):"object"!=typeof e||can.isArray(e)||"undefined"!=typeof e.nodeType||e.getDOMNode?prepareNodeList(Y.all(e)):new Y.NodeList(e)},can.get=function(e,n){return e._nodes[n]},can.append=function(e,n){e.each(function(e){"string"==typeof n&&(n=can.buildFragment(n,e)),e.append(n)})},can.addClass=function(e,n){return e.addClass(n)},can.data=function(e,n,t){return void 0===t?e.item(0).getData(n):e.item(0).setData(n,t)},can.remove=function(e){return e.remove()&&e.destroy()},can.has=function(e,n){return Y.DOM.contains(e[0],n)?e:[]},can._yNodeRemove=can._yNodeRemove||Y.Node.prototype.remove,Y.Node.prototype.remove=function(){var e=this.getDOMNode();if(1===e.nodeType){can.trigger(this,"removed",[],!1);for(var n,t=e.getElementsByTagName("*"),a=0;void 0!==(n=t[a]);a++)can.trigger(n,"removed",[],!1)}can._yNodeRemove.apply(this,arguments)},Y.NodeList.addMethod("remove",Y.Node.prototype.remove);var optionsMap={type:"method",success:void 0,error:void 0},updateDeferred=function(e,n){if(e&&e.io){var t=e.io;for(var a in t)n[a]="function"==typeof n[a]?function(){t[a].apply(t,arguments)}:a[t]}};can.ajax=function(options){var d=can.Deferred(),requestOptions=can.extend({},options);for(var option in optionsMap)void 0!==requestOptions[option]&&(requestOptions[optionsMap[option]]=requestOptions[option],delete requestOptions[option]);requestOptions.sync=!options.async;var success=options.success,error=options.error;requestOptions.on={success:function(transactionid,response){var data=response.responseText;"json"===options.dataType&&(data=eval("("+data+")")),updateDeferred(request,d),d.resolve(data),success&&success(data,"success",request)},failure:function(){updateDeferred(request,d),d.reject(request,"error"),error&&error(request,"error")}};var request=Y.io(requestOptions.url,requestOptions);return updateDeferred(request,d),d};var yuiEventId=0,addBinding=function(e,n,t,a){if(e instanceof Y.NodeList||!e.on||e.getDOMNode)e.each(function(e){e=can.$(e);var i=can.data(e,"events"),r=t+":"+n;i||can.data(e,"events",i={}),i[r]||(i[r]={}),void 0===a.__bindingsIds&&(a.__bindingsIds=yuiEventId++),i[r][a.__bindingsIds]=n?e.item(0).delegate(t,a,n):e.item(0).on(t,a)});else{var i=e,r=i.__canEvents=i.__canEvents||{};r[t]||(r[t]={}),void 0===a.__bindingsIds&&(a.__bindingsIds=yuiEventId++),r[t][a.__bindingsIds]=i.on(t,a)}},removeBinding=function(e,n,t,a){if(e instanceof Y.NodeList||!e.on||e.getDOMNode)e.each(function(e){e=can.$(e);var i=can.data(e,"events");if(i){var r=t+":"+n,o=i[r],s=o[a.__bindingsIds];s.detach(),delete o[a.__bindingsIds],can.isEmptyObject(o)&&delete i[t],can.isEmptyObject(i)}});else{var i=e,r=i.__canEvents||{},o=r[t],s=o[a.__bindingsIds];s.detach(),delete o[a.__bindingsIds],can.isEmptyObject(o)&&delete r[t],can.isEmptyObject(r)}};can.bind=function(e,n){return this.bind&&this.bind!==can.bind?this.bind(e,n):this.on||this.nodeType?addBinding(can.$(this),void 0,e,n):this.addEvent?this.addEvent(e,n):can.addEvent.call(this,e,n),this},can.unbind=function(e,n){return this.unbind&&this.unbind!==can.unbind?this.unbind(e,n):this.on||this.nodeType?removeBinding(can.$(this),void 0,e,n):can.removeEvent.call(this,e,n),this},can.on=can.bind,can.off=can.unbind,can.trigger=function(e,n,t,a){e instanceof Y.NodeList&&(e=e.item(0)),e.getDOMNode&&(e=e.getDOMNode()),e.nodeName?(e=Y.Node(e),a===!1&&e.once(n,function(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e._stopper&&e._stopper()}),"string"!=typeof n&&(t=n,n=t.type,delete t.type),realTrigger(e.getDOMNode(),n,t||{})):("string"==typeof n&&(n={type:n}),n.target=n.target||e,can.dispatch.call(e,n,can.makeArray(t)))},Y.mix(Y.Node.DOM_EVENTS,{removed:!0,inserted:!0,attributes:!0,foo:!0}),Y.Env.evt.plugins.attributes={on:function(){var e=can.makeArray(arguments);return Y.Event._attach(e,{facade:!1})}},can.delegate=function(e,n,t){return this.on||this.nodeType?addBinding(can.$(this),e,n,t):this.delegate?this.delegate(e,n,t):can.bind.call(this,n,t),this},can.undelegate=function(e,n,t){return this.on||this.nodeType?removeBinding(can.$(this),e,n,t):this.undelegate?this.undelegate(e,n,t):can.unbind.call(this,n,t),this};var realTrigger,realTriggerHandler=function(e,n,t){var a,i=Y.Node(e),r=can.Y.Event.getListeners(i._yuid,n);if(r)for(a=0;a<r.length;a++)if(r[a].fire)r[a].fire(t);else{if(!r[a].handles)throw"can not fire event";can.each(r[a].handles,function(e){e.evt.fire(t)})}},fakeTrigger=function(e,n,t){var a=!1,i=can.extend({type:n,target:e,faux:!0,_stopper:function(){a=this.cancelBubble},stopPropagation:function(){a=this.cancelBubble},preventDefault:function(){}},t);if(realTriggerHandler(e,n,i),"inserted"!==n&&"removed"!==n)for(;!a&&e!==document&&e.parentNode;)e=e.parentNode,realTriggerHandler(e,n,i)};return realTrigger=document.createEvent?function(e,n,t){fakeTrigger(e,n,t)}:function(e,n,t){fakeTrigger(e,n,t)},can.attr=attr,delete attr.MutationObserver,can});
//# sourceMappingURL=yui.js.map