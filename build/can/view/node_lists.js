define(["can/util/library","can/elements"],function(e){var n=!0;try{document.createTextNode("")._=0}catch(r){n=!1}var t={},a={},i="ejs_"+Math.random(),s=0,u=function(e,r){var t=r||a,u=c(e,t);return u?u:n||3!==e.nodeType?(++s,e[i]=(e.nodeName?"element_":"obj_")+s):(++s,t["text_"+s]=e,"text_"+s)},c=function(e,r){if(n||3!==e.nodeType)return e[i];for(var t in r)if(r[t]===e)return t},l=[].splice,o=[].push,p=function(e){for(var n=0,r=0,t=e.length;t>r;r++){var a=e[r];a.nodeType?n++:n+=p(a)}return n},f=function(e,n){for(var r={},t=0,a=e.length;a>t;t++){var i=d.first(e[t]);r[u(i,n)]=e[t]}return r},d={id:u,update:function(n,r){var t=d.unregisterChildren(n);r=e.makeArray(r);var a=n.length;return l.apply(n,[0,a].concat(r)),n.replacements?d.nestReplacements(n):d.nestList(n),t},nestReplacements:function(e){for(var n=0,r={},t=f(e.replacements,r),a=e.replacements.length;n<e.length&&a;){var i=e[n],s=t[c(i,r)];s&&(e.splice(n,p(s),s),a--),n++}e.replacements=[]},nestList:function(e){for(var n=0;n<e.length;){var r=e[n],a=t[u(r)];a?a!==e&&e.splice(n,p(a),a):t[u(r)]=e,n++}},last:function(e){var n=e[e.length-1];return n.nodeType?n:d.last(n)},first:function(e){var n=e[0];return n.nodeType?n:d.first(n)},register:function(e,n,r){return e.unregistered=n,e.parentList=r,r===!0?e.replacements=[]:r?(r.replacements.push(e),e.replacements=[]):d.nestList(e),e},unregisterChildren:function(n){var r=[];return e.each(n,function(e){e.nodeType?(n.replacements||delete t[u(e)],r.push(e)):o.apply(r,d.unregister(e))}),r},unregister:function(e){var n=d.unregisterChildren(e);if(e.unregistered){var r=e.unregistered;delete e.unregistered,delete e.replacements,r()}return n},nodeMap:t};return e.view.nodeLists=d,d});
//# sourceMappingURL=node_lists.js
//# sourceMappingURL=node_lists.js.map