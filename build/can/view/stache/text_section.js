define(["can/util/library","can/view/live","can/view/stache/utils"],function(t,e,n){e=e||t.view.live;var i=function(){this.stack=[new a]},s=function(){};t.extend(i.prototype,n.mixins),t.extend(i.prototype,{startSection:function(t){var e=new a;this.last().add({process:t,truthy:e}),this.stack.push(e)},endSection:function(){this.stack.pop()},inverse:function(){this.stack.pop();var t=new a;this.last().last().falsey=t,this.stack.push(t)},compile:function(n){var i=this.stack[0].compile();return function(r,a){var u=t.compute(function(){return i(r,a)},this,!1,!0);u.bind("change",s);var c=u();u.hasDependencies?(n.attr?e.simpleAttribute(this,n.attr,u):e.attributes(this,u),u.unbind("change",s)):n.attr?t.attr.set(this,n.attr,c):e.setAttributes(this,c)}}});var r=function(t,e,n){return function(i,s){return t.call(this,i,s,e,n)}},a=function(){this.values=[]};return t.extend(a.prototype,{add:function(t){this.values.push(t)},last:function(){return this.values[this.values.length-1]},compile:function(){for(var t=this.values,e=t.length,n=0;e>n;n++){var i=this.values[n];"object"==typeof i&&(t[n]=r(i.process,i.truthy&&i.truthy.compile(),i.falsey&&i.falsey.compile()))}return function(n,i){for(var s,r="",a=0;e>a;a++)s=t[a],r+="string"==typeof s?s:s.call(this,n,i);return r}}}),i});
//# sourceMappingURL=text_section.js.map