define(["can/util/library","can/view/mustache","can/control"],function(e){var t=function(){var e={"":!0,"true":!0,"false":!1},t=function(t){if(t&&t.getAttribute){var n=t.getAttribute("contenteditable");return e[n]}};return function(e){var n=t(e);return"boolean"==typeof n?n:!!t(e.parentNode)}}(),n=function(e){return"{"===e[0]&&"}"===e[e.length-1]?e.substr(1,e.length-2):e};e.view.attr("can-value",function(i,l){var r,c,h=n(i.getAttribute("can-value")),v=l.scope.computeData(h,{args:[]}).compute;return"input"===i.nodeName.toLowerCase()&&("checkbox"===i.type&&(r=e.attr.has(i,"can-true-value")?i.getAttribute("can-true-value"):!0,c=e.attr.has(i,"can-false-value")?i.getAttribute("can-false-value"):!1),"checkbox"===i.type||"radio"===i.type)?void new s(i,{value:v,trueValue:r,falseValue:c}):"select"===i.nodeName.toLowerCase()&&i.multiple?void new o(i,{value:v}):t(i)?void new u(i,{value:v}):void new a(i,{value:v})});var i={enter:function(e,t,n){return{event:"keyup",handler:function(e){return 13===e.keyCode?n.call(this,e):void 0}}}};e.view.attr(/can-[\w\.]+/,function(t,a){var s=a.attributeName,o=s.substr("can-".length),u=function(i){var o=n(t.getAttribute(s)),u=a.scope.read(o,{returnObserveMethods:!0,isArgument:!0});return u.value.call(u.parent,a.scope._context,e.$(this),i)};if(i[o]){var l=i[o](a,t,u);u=l.handler,o=l.event}e.bind.call(t,o,u)});var a=e.Control.extend({init:function(){"SELECT"===this.element[0].nodeName.toUpperCase()?setTimeout(e.proxy(this.set,this),1):this.set()},"{value} change":"set",set:function(){if(this.element){var e=this.options.value();this.element[0].value=null==e?"":e}},change:function(){this.element&&this.options.value(this.element[0].value)}}),s=e.Control.extend({init:function(){this.isCheckbox="checkbox"===this.element[0].type.toLowerCase(),this.check()},"{value} change":"check",check:function(){if(this.isCheckbox){var t=this.options.value(),n=this.options.trueValue||!0;this.element[0].checked=t===n}else{var i=this.options.value()==this.element[0].value?"set":"remove";e.attr[i](this.element[0],"checked",!0)}},change:function(){this.isCheckbox?this.options.value(this.element[0].checked?this.options.trueValue:this.options.falseValue):this.element[0].checked&&this.options.value(this.element[0].value)}}),o=a.extend({init:function(){this.delimiter=";",this.set()},set:function(){var t=this.options.value();"string"==typeof t?(t=t.split(this.delimiter),this.isString=!0):t&&(t=e.makeArray(t));var n={};e.each(t,function(e){n[e]=!0}),e.each(this.element[0].childNodes,function(e){e.value&&(e.selected=!!n[e.value])})},get:function(){var t=[],n=this.element[0].childNodes;return e.each(n,function(e){e.selected&&e.value&&t.push(e.value)}),t},change:function(){var t=this.get(),n=this.options.value();this.isString||"string"==typeof n?(this.isString=!0,this.options.value(t.join(this.delimiter))):n instanceof e.List?n.attr(t,!0):this.options.value(t)}}),u=e.Control.extend({init:function(){this.set(),this.on("blur","setValue")},"{value} change":"set",set:function(){var e=this.options.value();this.element[0].innerHTML="undefined"==typeof e?"":e},setValue:function(){this.options.value(this.element[0].innerHTML)}})});
//# sourceMappingURL=bindings.js.map