define(["can/util/library"],function(e){var r=function(e,r,t){for(var n,i=r.split("."),o=e;n=i.shift();)o=o[n],t&&t(o,n);return o},t=function(e){this.array=e};t.prototype.toString=function(){return""+e.inArray(this.item,this.array)};var n=function(e){this.root=e,this.references=[]};n.ArrIndex=t,e.extend(n.prototype,{make:function(n){var i,o=[];(e.isArray(this.root)||this.root instanceof e.LazyList)&&(i=new t(this.root)),r(this.root,n,function(r,n){i?(i.item=r,o.push(i),i=void 0):(o.push(n),e.isArray(r)&&(i=new t(r)))});var s=function(){return o.join(".")};return this.references.push(s),s},removeChildren:function(e,r){for(var t=0;t<this.references.length;){var n=this.references[t]();0===n.indexOf(e)?(r(this.get(n),n),this.references.splice(t,1)):t++}},get:function(e){return r(this.root,e)},each:function(r){var t=this;e.each(this.references,function(e){var n=e();r(t.get(n),e,n)})}}),e.NestedReference=n});
//# sourceMappingURL=nested_reference.js.map