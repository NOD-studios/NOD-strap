define(["can/util/library","can/map","can/list"],function(e){e.dev.warn("can/map/attributes is a deprecated plugin and will be removed in a future release. can/map/define provides the same functionality in a more complete API."),e.each([e.Map,e.Model],function(t){if(void 0!==t){var n=function(e){return"object"==typeof e&&null!==e&&e};e.extend(t,{attributes:{},convert:{date:function(e){var t=typeof e;return"string"===t?(e=Date.parse(e),isNaN(e)?null:new Date(e)):"number"===t?new Date(e):e},number:function(e){return parseFloat(e)},"boolean":function(e){return"false"!==e&&"0"!==e&&e?!0:!1},"default":function(t,n,r,i){if(e.Map.prototype.isPrototypeOf(i.prototype)&&"function"==typeof i.model&&"function"==typeof i.models)return i[e.isArray(t)?"models":"model"](t);if(e.Map.prototype.isPrototypeOf(i.prototype))return e.isArray(t)&&"function"==typeof i.List?new i.List(t):new i(t);if("function"==typeof i)return i(t,n);var a,o=e.getObject(i),u=window;return i.indexOf(".")>=0&&(a=i.substring(0,i.lastIndexOf(".")),u=e.getObject(a)),"function"==typeof o?o.call(u,t,n):t}},serialize:{"default":function(e){return n(e)&&e.serialize?e.serialize():e},date:function(e){return e&&e.getTime()}}});var r=t.setup;t.setup=function(t,n,i){var a=this;r.call(a,t,n,i),e.each(["attributes"],function(e){a[e]&&t[e]!==a[e]||(a[e]={})}),e.each(["convert","serialize"],function(n){t[n]!==a[n]&&(a[n]=e.extend({},t[n],a[n]))})}}}),e.Map.prototype.__convert=function(e,t){var n,r,i=this.constructor,a=this.__get(e);return i.attributes&&(n=i.attributes[e],r=i.convert[n]||i.convert["default"]),null!==t&&n?r.call(i,t,a,function(){},n):t};var t=e.Map.helpers._serialize;e.Map.helpers._serialize=function(e,n,r){var i=e.constructor,a=i.attributes?i.attributes[n]:0,o=i.serialize?i.serialize[a]:0;return r&&"function"==typeof r.serialize?t.apply(this,arguments):o?o(r,a):t.apply(this,arguments)};var n=e.Map.prototype.serialize;return e.Map.prototype.serialize=function(e){var t=n.apply(this,arguments);return e?t[e]:t},e.Map});
//# sourceMappingURL=attributes.js.map